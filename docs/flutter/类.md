# 类

class关键字可以在**顶层**声明一个类

```dart
class Point {
  double x = 0;
  double y = 0;

  Point(double x, double y) {
    this.x = x;
    this.y = y;
  }
}
```

即可用类名构造，也可以定义看起来是静态方法的非默认构造方法，比如那些from开头的



## 构造函数

声明一个与类名一样的函数即可声明一个构造函数

构造方法不会被继承

上一段的简化写法
```dart
class Point {
  double x = 0;
  double y = 0;
  Point(this.x, this.y);
}
```
添加非默认构造方法 冒号之后的代码称为**初始化**

```dart
class Point {
  double x = 0;
  double y = 0;
  Point(this.x, this.y);
  Point.fromMap(Map<String, double> map)
    : x = map['x']!,
      y = map['y']!;
  toString() => 'Point<x=$x,y=$y>';
}
```

如果类生成的对象都是不变的，可以在生成这些对象时就将其变为编译时常量
```dart
class ImmutablePoint {
  static const ImmutablePoint origin = ImmutablePoint(0, 0);

  final double x, y;

  const ImmutablePoint(this.x, this.y);
}
```

有时候类中的构造函数仅用于调用类中其它的构造函数
```dart
class Point {
  double x, y;

  // The main constructor for this class.
  Point(this.x, this.y);

  // Delegates to the main constructor.
  Point.alongXAxis(double x) : this(x, 0);
}
```

`factory`关键字可以修饰一个工厂构造函数，它内部无法访问 `this`


## 继承

使用`extends`关键字单继承一个父类

父类**只有**非默认构造方法时，需要在子类的初始代码里执行一次，用`super.fromXX`即可

```dart
class Person {
  String? firstName;

  Person.fromJson(Map data) {
    print('in Person');
  }
}

class Employee extends Person {
  // Person does not have a default constructor;
  // you must call super.fromJson(data).
  Employee.fromJson(Map data) : super.fromJson(data) {
    print('in Employee');
  }
}
```
除了`null`所有的类型都继承`Object`


重写父类的方法需要`@override`装饰


## getter setter

`get` `set`修饰的方法可以拦截变量读取和修改


## 抽象类

使用 `abstract` 修饰的 `class` 无法被实例化，只能被继承

直接使用分号代替方法体即为抽象方法

使用 `implements` 代替 `extends` 可以实现抽象类却不继承，且支持一次实现多个抽象类


## 混入

使用 `with` 关键字并在其后跟上 Mixin 类的名字来使用 Mixin 模式

类似于python多继承

```dart
class Maestro extends Person with Musical, Aggressive, Demented {
  // ...
}
```

## 静态

使用`static`修饰静态方法和属性


## 范型

声明类时可以使用`class A<T>`定义

```dart
class Tuple<T> {

  List<T> _list = [];
  
  Tuple(int length, T fill){
    this._list = List<T>.filled(length, fill, growable:false);
  }  
}
```
使用extends可以限制范型继承，后面跟`?`允许null值
```dart
class Foo<T extends Object> {
  // Any type provided to Foo for T must be non-nullable.
}
```

方法中也用`<T>`
```dart
T first<T>(List<T> ts) {
  // Do some initial work or error checking, then...
  T tmp = ts[0];
  // Do some additional checking or processing...
  return tmp;
}
```
